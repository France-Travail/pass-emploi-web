version: 2

updates:
  # ===========================================
  # NPM Dependencies
  # ===========================================
  - package-ecosystem: npm
    directory: /
    schedule:
      interval: weekly
      day: monday
      time: '08:00'
      timezone: Europe/Paris
    open-pull-requests-limit: 15
    commit-message:
      prefix: 'chore(deps):'
    labels:
      - dependencies
      - npm
    groups:
      # Production dependencies - patch and minor (auto-merge côté CI)
      prod-minor-patch:
        applies-to: version-updates
        dependency-type: production
        update-types:
          - patch
          - minor
      # Development dependencies - patch and minor (auto-merge côté CI)
      dev-minor-patch:
        applies-to: version-updates
        dependency-type: development
        update-types:
          - patch
          - minor
      # Majors : groupés séparément, sans auto-merge
      majors:
        applies-to: version-updates
        update-types:
          - major

  # ===========================================
  # GitHub Actions
  # ===========================================
  - package-ecosystem: github-actions
    directory: /
    schedule:
      interval: weekly
      day: monday
      time: '08:00'
      timezone: Europe/Paris
    commit-message:
      prefix: 'ci(deps):'
    labels:
      - dependencies
      - github-actions
    groups:
      # GitHub Actions - patch and minor (auto-merge côté CI)
      actions-minor-patch:
        applies-to: version-updates
        update-types:
          - patch
          - minor
      # GitHub Actions - majors, à revoir manuellement
      actions-majors:
        applies-to: version-updates
        update-types:
          - major